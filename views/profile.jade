//
   Created by danielchoi on 2016-02-08.
link(href='/stylesheets/profile.css', rel='stylesheet')

extends layout

block content
    include toolbar
    h1= title
    p #{user.firstName}'s Profile
    if (!user)
        a(href="/login") Login
        br
        a(href="/register") Register
    if (user)

        p Your information:
        li Username: #{user.username}
        // Display user image - will be fixed for now.
        img(src="https://s-media-cache-ak0.pinimg.com/236x/52/5e/c0/525ec0f7d4ddb429ad28e9fb03e3761f.jpg")
        li First name: #{user.firstName}
        li Last name: #{user.lastName}
        li Email: #{user.email}

    if (user.isContributor == 1)
        #badge [Contributor]
    if (user.isContributor == 0)
        #badge [Viewer]

        if (user)
            button(onclick='myFunction()') Follow
                p#demo
                script.
                    function myFunction() {
                        var x;
                        if (confirm("Want to follow this contributor?") == true) {
                            x = "You are now following this contributor!";
                        } else {
                            x = "You decided not to follow :(";
                        }
                        document.getElementById("demo").innerHTML = x;
                    }

    p List of contributions:
        br
        each comic in comics
            - var title = comic.title;
            - var link = '/comic/'+comic.cid;
            a(href=link) #{title}
            br

    p # of subscribers: 0


    p Subscriptions:
        - var subs = user.subs;
        each c in subs
            - var subbedComic = c.subCid;
            - var subTitle = c.subComicName;
            - var cLink = '/comic/'+subbedComic;
            a(href=cLink) #{subTitle}
            br

    p List of subscribers:
    if (user)
        form(name="add-estimation", method="post")
            div.input
                span.label Title
                input(type="text", name="title", placeholder="Title here")
            div.input
                span.label Description
                textarea(name="description", cols="40", rows="5", placeholder="Enter " +
                "a description!")
            div.actions
                input(type="submit", value="add")
    else
        li#badge [Viewer]
    a(href="/logout") Logout